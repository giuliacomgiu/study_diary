<h1>Diário de Estudo!</h1>
<h2><%= link_to 'Cadastre seu item de estudo', new_study_item_path %> </h2>

<%= render partial: 'search_form', locals: {study_item: @study_item} %>

<h3>Todos os itens de estudo</h3>

<%= form_with model: @study_item,
              local: true, 
              url: sort_by_study_items_path,
              method: :get do |form| %>
  <%= form.label :sort_by, "Ordernar por:" %>
  <%= form.select :sort_by, [["Título", :title], ["Prazo", :deadline]] %>
  <%= form.submit "Ok" %>
<% end %>
<table class="table" style="width: 50%">
  <thead>
    <tr>
      <th scope="col">Título</th>
      <th scope="col">Status</th>
      <th scope="col">Prazo</th>
      <th scope="col">Categoria</th>
    </tr>
  </thead>

  <tbody>
  <% @study_items.each do |study_item| %>
    <tr>
      <td>
        <%= render partial: 'icon', locals: {study_item: study_item} %> 
        <%= link_to study_item.title, study_item_path(study_item) %>
      </td>
      <td><%= render partial: 'status', locals: {study_item: study_item} %></td>
      <td><%= "#{study_item.deadline.strftime('%d/%m/%y')}" unless study_item.deadline.nil?%></td>
      <td><%= study_item.categories %></td>
    </tr>
  <% end %>
  </tbody>
</table>
